<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Melissa & Brandon - Wedding</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Great+Vibes&family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap"
      rel="stylesheet"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "dusty-blue": "#5A6B80",
              "sage-green": "#6B7F70",
              "wedding-gold": "#B89E68",
              "pale-bg": "#F4F7F9",
            },
            fontFamily: {
              serif: ['"Playfair Display"', "serif"],
              header: ['"Cinzel"', "serif"],
              script: ['"Great Vibes"', "cursive"],
              body: ['"Lato"', "sans-serif"],
            },
          },
        },
      };
    </script>

    <style>
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fade-in-up {
        animation: fadeInUp 1.5s ease-out forwards;
      }
    </style>
  </head>
  <body class="bg-pale-bg text-gray-600 font-body overflow-x-hidden">
    <header
      class="relative min-h-screen flex flex-col items-center justify-center p-6 text-center overflow-hidden"
    >
      <img
        src="https://www.transparenttextures.com/patterns/gray-floral.png"
        alt="Paper Texture"
        class="absolute inset-0 w-full h-full object-cover opacity-35 mix-blend-multiply pointer-events-none -z-30"
      />

      <img
        src="flowers1.svg"
        alt="Watercolor Flowers Top Left"
        class="absolute top-0 left-0 w-72 md:w-96 opacity-90 pointer-events-none -z-10"
      />

      <img
        src="flowers2.svg"
        alt="Watercolor Flowers Bottom Right"
        class="absolute bottom-0 right-0 w-72 md:w-96 opacity-90 pointer-events-none -z-10"
      />

      <div class="z-10 animate-fade-in-up w-full">
        <h1 class="text-6xl md:text-8xl font-serif text-dusty-blue mb-2">
          Melissa
        </h1>

        <div
          class="w-full text-center text-4xl md:text-5xl font-script text-wedding-gold my-2 transform -rotate-3"
        >
          and
        </div>

        <h1 class="text-6xl md:text-8xl font-serif text-dusty-blue mb-8">
          Brandon
        </h1>

        <p
          class="uppercase tracking-[0.2em] text-sm text-gray-500 font-header mb-10"
        >
          Are Getting Married
        </p>

        <div class="mb-8 w-full max-w-lg mx-auto">
          <p class="uppercase tracking-widest text-dusty-blue font-bold mb-2">
            December
          </p>

          <div
            class="grid grid-cols-[1fr_auto_1fr] gap-4 items-center text-dusty-blue"
          >
            <div class="flex justify-end">
              <div
                class="w-28 md:w-36 border-t border-b border-wedding-gold py-1 text-center uppercase tracking-widest text-xs md:text-sm"
              >
                Thursday
              </div>
            </div>

            <div class="text-center">
              <span class="text-6xl font-serif text-wedding-gold font-bold"
                >10</span
              >
            </div>

            <div class="flex justify-start">
              <div
                class="w-28 md:w-36 border-t border-b border-wedding-gold py-1 text-center uppercase tracking-widest text-xs md:text-sm"
              >
                2026
              </div>
            </div>
          </div>
        </div>

        <p class="uppercase tracking-widest text-sm text-gray-500 font-header">
          Red Ivory, Hartbeespoort
        </p>
      </div>
    </header>

    <section class="bg-white py-16">
      <div class="max-w-4xl mx-auto px-4 text-center">
        <h2 class="font-serif text-3xl text-dusty-blue mb-4">
          Countdown to the Big Day
        </h2>
        <div class="w-24 h-1 bg-wedding-gold mx-auto mb-8"></div>

        <div
          class="flex flex-wrap justify-center gap-4 md:gap-8"
          id="countdown"
        ></div>
      </div>
    </section>

    <section class="py-16 bg-dusty-blue text-white">
      <div class="max-w-5xl mx-auto px-4 text-center">
        <h2 class="font-serif text-4xl mb-4">Our Journey</h2>
        <div class="w-24 h-1 bg-wedding-gold mx-auto mb-8"></div>

        <div
          class="relative w-full rounded-xl overflow-hidden shadow-2xl bg-black aspect-video"
        >
          <video
            id="wedding-video"
            class="w-full h-full object-cover"
            muted
            playsinline
            loop
            controls
          >
            <source src="OurJourney.mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
        </div>

        <p class="text-sm italic text-gray-300 mt-4">
          Watch a glimpse of our story
        </p>
      </div>
    </section>

    <section class="py-16 bg-pale-bg">
      <div class="max-w-6xl mx-auto px-4">
        <div class="text-center mb-12">
          <h2 class="font-serif text-4xl text-dusty-blue mb-4">
            Important Information
          </h2>
          <div class="w-24 h-1 bg-wedding-gold mx-auto"></div>
        </div>

        <div class="grid md:grid-cols-3 gap-6 text-center md:text-left">
          <div
            class="bg-white p-8 rounded-lg shadow-sm border-t-4 border-sage-green"
          >
            <h3 class="font-header text-xl text-dusty-blue mb-4">
              The Ceremony
            </h3>
            <p class="mb-2"><strong>Time:</strong>15:00</p>
            <p class="mb-4">
              <strong>Location:</strong> Red Ivory, Hartbeespoort
            </p>
            <p class="text-sm italic text-gray-500">
              Please arrive 30 minutes early for welcome drinks.
            </p>
          </div>

          <div
            class="bg-white p-8 rounded-lg shadow-sm border-t-4 border-dusty-blue"
          >
            <h3 class="font-header text-xl text-dusty-blue mb-4">Dress Code</h3>
            <p class="mb-2"><strong>Smart Casual</strong></p>
            <p class="text-sm text-gray-600 mb-2">
              We kindly invite guests to wear pastel colors if possible.
            </p>
            <p class="text-sm italic text-gray-500">
              The canepes and pre-wedding is on grass, so block heels are
              recommended for the ladies.
            </p>
          </div>

          <div
            class="bg-white p-8 rounded-lg shadow-sm border-t-4 border-wedding-gold"
          >
            <h3 class="font-header text-xl text-dusty-blue mb-4">
              Guest Information
            </h3>
            <p class="mb-2"><strong>No Plus Ones</strong></p>
            <p class="text-sm text-gray-600 mb-4">
              We are unable to accommodate plus ones unless explicitly named on
              your invitation.
            </p>
            <p class="mb-2"><strong>Adults Only</strong></p>
            <p class="text-sm text-gray-600">
              We love your little ones, but this will be an adults-only
              celebration (No children under 12).
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="py-16 bg-white">
      <div class="max-w-6xl mx-auto px-4">
        <div class="text-center mb-12">
          <h2 class="font-serif text-4xl text-dusty-blue mb-4">
            Accommodation
          </h2>
          <div class="w-24 h-1 bg-wedding-gold mx-auto mb-6"></div>

          <p class="text-gray-500 max-w-2xl mx-auto">
            We recommend booking your stay as soon as possible. Here are the
            closest and most popular options near the venue.
          </p>
        </div>

        <div class="grid md:grid-cols-3 gap-6">
          <div
            class="relative bg-white border border-gray-100 rounded-lg text-center hover:shadow-xl transition duration-300 overflow-hidden group flex flex-col h-full"
          >
            <div
              class="bg-sage-green text-white text-xs uppercase font-bold py-1 px-3 absolute top-0 right-0 rounded-bl-lg z-10"
            >
              Closest (0.4 km)
            </div>
            <div class="p-8 flex-grow flex flex-col justify-center">
              <h4 class="font-serif text-2xl text-dusty-blue mb-2">
                Browns Cabin & Cottages
              </h4>
              <p class="text-sm text-gray-500 italic mb-4">
                Farm-style cottages with stunning views
              </p>
              <p class="text-gray-600 text-sm mb-6">
                Located directly next to Red Ivory. Ideal for those who want to
                be minutes away from the dancefloor.
              </p>
            </div>
            <div class="p-6 pt-0 mt-auto">
              <a
                href="https://www.brownscabin.co.za"
                target="_blank"
                class="block w-full text-wedding-gold border border-wedding-gold px-4 py-3 text-sm uppercase tracking-wider hover:bg-wedding-gold hover:text-white transition"
              >
                Find Out More
              </a>
            </div>
          </div>

          <div
            class="relative bg-white border border-gray-100 rounded-lg text-center hover:shadow-xl transition duration-300 overflow-hidden group flex flex-col h-full"
          >
            <div
              class="bg-dusty-blue text-white text-xs uppercase font-bold py-1 px-3 absolute top-0 right-0 rounded-bl-lg z-10"
            >
              0.8 km Away
            </div>
            <div class="p-8 flex-grow flex flex-col justify-center">
              <h4 class="font-serif text-2xl text-dusty-blue mb-2">
                Magalies Park
              </h4>
              <p class="text-sm text-gray-500 italic mb-4">
                Resort, Spa & Golf Course
              </p>
              <p class="text-gray-600 text-sm mb-6">
                A larger resort offering self-catering chalets, a spa, and golf
                course. Great for families.
              </p>
            </div>
            <div class="p-6 pt-0 mt-auto">
              <a
                href="https://www.firstgroup-sa.co.za/magalies-park"
                target="_blank"
                class="block w-full text-wedding-gold border border-wedding-gold px-4 py-3 text-sm uppercase tracking-wider hover:bg-wedding-gold hover:text-white transition"
              >
                Find Out More
              </a>
            </div>
          </div>

          <div
            class="relative bg-white border border-gray-100 rounded-lg text-center hover:shadow-xl transition duration-300 overflow-hidden group flex flex-col h-full"
          >
            <div
              class="bg-gray-400 text-white text-xs uppercase font-bold py-1 px-3 absolute top-0 right-0 rounded-bl-lg z-10"
            >
              2.0 km Away
            </div>
            <div class="p-8 flex-grow flex flex-col justify-center">
              <h4 class="font-serif text-2xl text-dusty-blue mb-2">
                Leopard Lodge
              </h4>
              <p class="text-sm text-gray-500 italic mb-4">
                Classic Bushveld Lodge
              </p>
              <p class="text-gray-600 text-sm mb-6">
                A beautiful lodge set high on the Magaliesberg mountains with
                panoramic views of the dam.
              </p>
            </div>
            <div class="p-6 pt-0 mt-auto">
              <a
                href="http://www.leopardlodge.co.za/"
                target="_blank"
                class="block w-full text-wedding-gold border border-wedding-gold px-4 py-3 text-sm uppercase tracking-wider hover:bg-wedding-gold hover:text-white transition"
              >
                Find Out More
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="py-16 bg-dusty-blue text-white" id="rsvp">
      <div class="max-w-3xl mx-auto px-4 text-center">
        <h2 class="font-serif text-4xl mb-4">RSVP</h2>
        <div class="w-24 h-1 bg-wedding-gold mx-auto mb-8"></div>

        <div
          id="rsvp-container"
          class="bg-white text-gray-700 p-8 rounded-lg shadow-xl relative min-h-[300px]"
        >
          <div
            id="rsvp-loading"
            class="absolute inset-0 flex flex-col items-center justify-center bg-white z-10 rounded-lg"
          >
            <div
              class="animate-spin rounded-full h-12 w-12 border-b-2 border-sage-green mb-4"
            ></div>
            <p class="text-dusty-blue font-serif">Finding your invitation...</p>
          </div>

          <div
            id="rsvp-error"
            class="hidden absolute inset-0 flex flex-col items-center justify-center bg-white z-10 rounded-lg p-6"
          >
            <p class="text-red-500 font-bold mb-2 text-xl">Oops!</p>
            <p class="text-gray-600 mb-4">
              We couldn't find your invitation. Please check the link from your
              invitation.
            </p>
          </div>

          <div
            id="rsvp-success"
            class="hidden absolute inset-0 flex flex-col items-center justify-center bg-white z-10 rounded-lg p-6"
          >
            <h3 class="text-3xl font-serif text-sage-green mb-4">Thank You!</h3>
            <p class="text-gray-600">
              We have updated the RSVP for your party.
            </p>
          </div>

          <form id="rsvp-form" class="text-left space-y-8 hidden">
            <div
              class="p-4 bg-blue-50 border border-blue-100 rounded text-sm text-blue-800 text-center relative"
            >
              <div class="flex items-center justify-center gap-2">
                <p>Welcome! You can RSVP for anyone in your party below.</p>

                <div class="group relative flex items-center">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-5 h-5 text-blue-600 cursor-help hover:text-blue-800 transition-colors"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"
                    />
                  </svg>

                  <div
                    class="absolute bottom-full left-1/2 -translate-x-1/2 mb-3 w-64 p-3 bg-gray-800 text-white text-xs rounded shadow-lg invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-300 z-50 text-left leading-relaxed"
                  >
                    <p class="mb-2">
                      You are not obligated to RSVP now, nor are you obligated
                      to RSVP for other people in your party.
                    </p>
                    <p class="mb-2">
                      You can return and change your RSVP's at a later date.
                    </p>
                    <p class="font-bold text-yellow-400">
                      Final RSVPs due by November 10th (no changes thereafter).
                    </p>

                    <div
                      class="absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-800"
                    ></div>
                  </div>
                </div>
              </div>
            </div>

            <div id="members-list" class="space-y-6"></div>

            <button
              type="submit"
              id="submit-btn"
              class="w-full bg-sage-green text-white py-3 mt-4 uppercase tracking-widest font-bold hover:bg-gray-600 transition"
            >
              Confirm Responses
            </button>
          </form>
        </div>
      </div>
    </section>

    <section class="py-16 bg-pale-bg">
      <div class="max-w-6xl mx-auto px-4 text-center">
        <h2 class="font-serif text-4xl text-dusty-blue mb-4">Getting There</h2>
        <div class="w-24 h-1 bg-wedding-gold mx-auto mb-8"></div>

        <div class="w-full h-96 rounded-lg overflow-hidden shadow-md">
          <iframe
            width="100%"
            height="100%"
            style="border: 0"
            loading="lazy"
            allowfullscreen
            src="https://maps.google.com/maps?q=Red+Ivory,Hartbeespoort&t=&z=13&ie=UTF8&iwloc=&output=embed"
          >
          </iframe>
        </div>
      </div>
    </section>

    <footer class="bg-gray-800 text-gray-400 py-8 text-center text-sm">
      <p class="font-serif italic text-lg mb-2">Melissa & Brandon</p>
      <p>Â© 2026. Can't wait to celebrate with you.</p>
    </footer>

    <script>
      const weddingDate = new Date("December 10, 2026 15:00:00").getTime();

      function updateCountdown() {
        const now = new Date().getTime();
        const distance = weddingDate - now;

        if (distance < 0) {
          document.getElementById("countdown").innerHTML = "We are married!";
          return;
        }

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor(
          (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        const timeUnits = [
          { value: days, label: "Days" },
          { value: hours, label: "Hours" },
          { value: minutes, label: "Minutes" },
          { value: seconds, label: "Seconds" },
        ];

        let html = "";
        timeUnits.forEach((unit) => {
          html += `
                    <div class="flex flex-col items-center bg-pale-bg p-4 rounded-lg w-24 shadow-sm border border-gray-100">
                        <span class="text-3xl font-serif text-dusty-blue font-bold">${unit.value}</span>
                        <span class="text-xs uppercase tracking-wider text-gray-500 mt-1">${unit.label}</span>
                    </div>
                `;
        });

        document.getElementById("countdown").innerHTML = html;
      }

      setInterval(updateCountdown, 1000);
      updateCountdown();

      const urlParams = new URLSearchParams(window.location.search);
      const guestId = urlParams.get("guest");

      if (guestId) {
        console.log("Guest ID found:", guestId);
      }
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const video = document.getElementById("wedding-video");

        if ("IntersectionObserver" in window) {
          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  video.play().catch((error) => {
                    console.log("Autoplay prevented:", error);
                  });
                } else {
                  video.pause();
                }
              });
            },
            { threshold: 0.5 }
          );

          observer.observe(video);
        }
      });
    </script>

    <script>
      const APPS_SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbz5h2JJ0NTZD353TBDr5VsWtKKXUDmXy7IVQofnJkRBzZra2caWRquosuouXaFdLzX-/exec";

      document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const guestId = urlParams.get("guest");

        const loadingDiv = document.getElementById("rsvp-loading");
        const errorDiv = document.getElementById("rsvp-error");
        const form = document.getElementById("rsvp-form");
        const membersList = document.getElementById("members-list");
        const successDiv = document.getElementById("rsvp-success");
        const submitBtn = document.getElementById("submit-btn");

        if (!guestId) {
          loadingDiv.classList.add("hidden");
          errorDiv.classList.remove("hidden");
          return;
        }

        fetch(`${APPS_SCRIPT_URL}?action=getGuest&id=${guestId}`)
          .then((res) => res.json())
          .then((response) => {
            loadingDiv.classList.add("hidden");

            if (response.status === "success") {
              const members = response.members;
              form.classList.remove("hidden");

              membersList.innerHTML = "";

              members.forEach((member, index) => {
                const memberBlock = document.createElement("div");
                memberBlock.className =
                  "bg-gray-50 p-6 rounded-lg border border-gray-100";
                memberBlock.innerHTML = `
                        <h4 class="font-serif text-xl text-dusty-blue mb-4 pb-2 border-b border-gray-200 flex justify-between">
                            ${member.name}
                            <input type="hidden" name="id_${index}" value="${
                  member.id
                }">
                        </h4>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-xs uppercase tracking-wider font-bold mb-2">Attending?</label>
                                <div class="flex gap-6">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="radio" name="attending_${index}" value="Yes" class="accent-sage-green w-4 h-4" ${
                  member.attending === "Yes" ? "checked" : ""
                } required> 
                                        <span>Joyfully Accepts</span>
                                    </label>
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="radio" name="attending_${index}" value="No" class="accent-sage-green w-4 h-4" ${
                  member.attending === "No" ? "checked" : ""
                } required> 
                                        <span>Regretfully Declines</span>
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label class="block text-xs uppercase tracking-wider font-bold mb-1">Dietary Restrictions</label>
                                <textarea name="dietary_${index}" class="w-full border-2 border-gray-100 p-2 rounded focus:outline-none focus:border-wedding-gold text-sm" rows="2" placeholder="Dietary requirements...">${
                  member.dietary || ""
                }</textarea>
                            </div>
                        </div>
                    `;
                membersList.appendChild(memberBlock);
              });
            } else {
              errorDiv.classList.remove("hidden");
              errorDiv.querySelector("p:last-child").textContent =
                "We couldn't find your invitation group.";
            }
          })
          .catch((err) => {
            console.error(err);
            loadingDiv.classList.add("hidden");
            errorDiv.classList.remove("hidden");
          });

        form.addEventListener("submit", function (e) {
          e.preventDefault();

          submitBtn.disabled = true;
          submitBtn.textContent = "Saving...";

          const payload = [];
          const memberBlocks = membersList.children;

          for (let i = 0; i < memberBlocks.length; i++) {
            const id = document.querySelector(`input[name="id_${i}"]`).value;
            const attending = document.querySelector(
              `input[name="attending_${i}"]:checked`
            ).value;
            const dietary = document.querySelector(
              `textarea[name="dietary_${i}"]`
            ).value;

            payload.push({ id, attending, dietary });
          }

          fetch(APPS_SCRIPT_URL, {
            method: "POST",
            body: JSON.stringify(payload),
          })
            .then((res) => res.json())
            .then((data) => {
              if (data.status === "success") {
                form.classList.add("hidden");
                successDiv.classList.remove("hidden");
              } else {
                alert(
                  "Something went wrong saving your RSVP. Please try again."
                );
                submitBtn.disabled = false;
                submitBtn.textContent = "Confirm Responses";
              }
            })
            .catch((err) => {
              console.error(err);
              alert("Network error. Please try again.");
              submitBtn.disabled = false;
              submitBtn.textContent = "Confirm Responses";
            });
        });
      });
    </script>
  </body>
</html>
